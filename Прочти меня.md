## RUJKA Entity Compiler
Набор файлов для комфортного энтити моддинга карт в видеоигре [Star Wars Jedi Knight III: Jedi Academy](https://ru.wikipedia.org/wiki/Star_Wars_Jedi_Knight:_Jedi_Academy)

Подготовил: Tray + пользовался советами Gigabyte и LTBR

Помощь: если будут вопросы, пишите нам в дискорде - 
<a href="https://discord.gg/cHBtdTh"><img src="https://img.shields.io/badge/discord-join-7289DA.svg?logo=discord&longCache=true&style=flat" /></a>

Использованы:
* батник из гайда - https://jkhub.org/forums/topic/10072-another-entity-modding-tutorial/
* q3map2.exe - компилятор из [GTKRadiant](https://github.com/id-Software/GtkRadiant) + куча библиотек к нему. Если вы точно знаете, какие из них нужны, какие нет, дайте знать

### ВАЖНО:
В пути к папке с компилятором не должно быть русских букв!

### Как пользоваться:
====================================
1. Изначально вам нужен .bsp файл карты. Если он у вас есть читайте дальше. Если у вас есть только pk3 файл с картой, то откройте этот файл с помощью архиватора (pk3 это переименованный zip архив) и откройте в нем папку maps, там будет файл .bsp, который вам и нужен для всех последующих действий. Разархивируйте его куда-нибудь и идите дальше по шагам.
2. Внутри EntityCompiler в папке maps создаем новую папку с названием вашего .bsp файла (без расширения) и кидаем этот файл в нее.
3. Открываем bsp файл с помощью текстового редактора (Блокнот/Notepad++/VSCode), запускаем поиск (Ctrl + F) и ищем по ключевому слову "worldspawn". Будет выглядеть примерно так (на цвет не обращаем внимание, у меня Notepad++ с темной темой):

![](https://i.imgur.com/q2dJ1bG.png)

4. Копируем всё, начиная с первой фигурной скобки и до последней, после которой начинаются уже бинарные данные (месиво из непонятных символов). Внимательно смотрите, чтобы у вас была выделена первая фигурная скобка, про неё очень легко забыть ибо она на строчке с таким же массивом бинарной части данных, только перед entity частью. Примерно выглядит все это так.

Отсюда начинаем:

![Отсюда начинаем:](https://i.imgur.com/q2dJ1bG.png)

Здесь заканчиваем выделение:

![Здесь заканчиваем выделение:](https://i.imgur.com/gcF9Mf7.png)

5. В той же папке создаём новый файл с расширением .ent и с ровно таким же названием как и название .bsp файла. В итоге папка будет выглядеть так:

![](https://i.imgur.com/jFsyUaO.png)

6. Открываем наш .ent файл текстовым редактором и копируем в него всё, что вы выделяли в шаге 4.
7. Проводим необходимые изменения и сохраняем.
8. Далее возвращаемся в корень EntityCompiler, где лежит compiler.bat. Запускаем его, вводим в поле название карты и жмем Enter
9. Если у вас все пройдет успешно, то будет выглядеть приблизительно так:

![](https://i.imgur.com/1uVYmoJ.png)

Это значит, что ваш bsp файл теперь заменён новым, с учетом изменений, которые вы внесли в свой .ent файл. Теперь его вам и нужно использовать далее.

10. Если же у вас где-то будет написано Error, то обратитесь за помощью к нам в Discord сервер в канал #помощь/
11. Если все получилось, то дальше два варианта:
* Либо закидываете ваш новый bsp файл туда же, откуда взяли, с заменой (но советую сохранить на всякий случай старый вариант)
* Либо делаете свой pk3 файл и закидываете его. Если выбрали этот вариант, то просто создайте папку maps и закиньте в неё ваш .bsp файл, после чего заархивируйте папку maps в zip архив и после этого поменяйте ему расширение на pk3.
